{ 
  "model_nature" : "Segmentation",
  "model_name" : "Vessel_seg_UNET",
  "is_3d": true,
  "isDepthFirst": true,
  "batch_dim_present": false,
  "default" : true,
  "dataset" : "IXI_MRA",
  "test_run" : "final_test",
  "resize" : 120,
  "centre_crop" : 120,
  "mean_vec" : [0.485, 0.456, 0.406],
  "std_vec" :  [0.229, 0.224, 0.225],
  "patch_overlap": 12,
  "_comment": "If you dont want to use patcher mention patch_size as -1",
  "patch_size": 64,
  "log_level" : "INFO",
  "output_path" : "/project/ardas/TorchEsegeta_latest/results/",
  "amp_enbled" : true,
  "share_gpu_threads": 2,
  "timeout_enabled": false,
  "_comment": "set time in seconds",
  "timeout_time": 3600,
  "methods" : [   
                     { "method_name" : "captum_Saliency",  
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Saliency heat map",
                       "device_id" : "cuda:6",
                       "share_gpu": true,
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"abs": false, "nt_type":  "smoothgrad", "n_samples" :  10, "affine_size": 4}
                     },

                     { "method_name" : "captum_Feature_Ablation",  
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Feature ablation",
                       "device_id" : "cuda:0",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"perturbations_per_eval": 2,"nt_type":  "smoothgrad", "n_samples" :  2, "affine_size": 4}
                     },
                     { "method_name" : "captum_Integrated_Gradients",  
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Integrated gradient heat map",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"nt_type":  "smoothgrad", "n_samples" :  2, "affine_size": 4}
                     },
                     { "method_name" : "captum_occlusion",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Occlusion sensitivity heat map",
                       "device_id" : "cuda:0",
                       "patch_required": false,
                       "use": false,
                       "uncertainity": true,
                       "keywords": {"sliding_window_shapes": "1,11,11,11" ,"strides": 3, "nt_type":  "smoothgrad", "n_samples" :  2, "affine_size": 4 }
                     },
                     { "method_name" : "captum_guided_backprop",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Guided back propagation heat map",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"nt_type":  "smoothgrad", "n_samples" :  10, "affine_size": 4}
                     },
                     { "method_name" : "captum_deep_lift",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Deep Lift heat map",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"nt_type":  "smoothgrad", "n_samples" :  2, "affine_size": 4}
                     },
                     { "method_name" : "captum_deconvolution",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "blended_heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Deconvolution heat map",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"nt_type":  "smoothgrad", "n_samples" :  5,"affine_size": 4}
                     },
                     { "method_name" : "captum_guided_grad_cam",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Guided grad cam heat map",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5","nt_type":  "smoothgrad", "n_samples" :  5, "affine_size": 4}
                     },
                     { "method_name" : "captum_layer_activaltion",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Layer activation maps layer4",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work for this method as the input and the layer activation size is differerent",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5", "neuron_start":  0, "neuron_end" :  5, "affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_guided_backprop",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Guided backpropagation (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"firstLayer": "Conv1.conv[0]","affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_integrated_grad",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Integrated Gradient (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"n_samples": 2, "firstLayer": "Conv1.conv[0]","affine_size": 4
                       }
                     },
                     { "method_name" : "cnn_vis_guided_grad_cam",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Guided Grad cam for Conv5 (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5.conv[0]", "firstLayer": "Conv1.conv[0]","affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_score_cam",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Score cam for Conv5 (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5.conv[0]", "affine_size": 4}
                     },
                     { "method_name" : "captum_layer_conductance",
                       "_comment" : "If object has no attribute '_non_persistent_buffers_set' issue occurs, run with single device",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Layer conductance for Conv5",
                       "device_id" : "cuda:5",
                       "_comment" : "This method doesn't ork with patcher as the conv output size is different",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv2","device_ids": [5,6], "affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_vanilla_backprop",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Vanilla backpropagation (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"firstLayer":"Conv1.conv[0]","affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_grad_cam",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Grad cam for Conv 5 (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5.conv[0]", "affine_size": 4 }
                     },
                     { "method_name" : "cnn_vis_grad_times_image",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Grad Times Image (CNN Visualization)",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"firstLayer":"Conv1.conv[0]","affine_size": 4}
                     },
                     { "method_name" : "captum_layer_grad_shap",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Layer gradient shap for Conv1",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv1","attribute_to_layer_input": true ,  "affine_size": 4}
                     },
                     { "method_name" : "torchray_excitation_backprop",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Excitation Backpropagation for Conv5",
                       "device_id" : "cuda:6",
                       "_comment" : "this methods won't work with patcher",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv2", "affine_size": 4}
                     },
                     { "method_name" : "torchray_contrast_excitation_backprop",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Contrastive excitation backpropagation for layer 4",
                       "device_id" : "cuda:6",
                       "_comment" : "this methods won't work with patcher",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5", "contrast_layer":  "Conv1", "classifier_layer": "Conv", "affine_size": 4}
                     },
                     { "method_name" : "captum_gradient_shap",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Gradient Shap",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"n_samples" :  5, "stdiv": 1.0, "affine_size": 4 }
                     },
                     { "method_name" : "captum_internal_influence",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Internal influence for layer 4",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv2", "device_ids": [6,5,4,3],"affine_size": 4}
                     },
                     { "method_name" : "captum_input_x_gradient",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Input X gradient",
                       "device_id" : "cuda:6",
                       "share_gpu": true,
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"affine_size": 4}
                     },
                     { "method_name" : "captum_deep_lift_shap",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "positive",
                       "show_colorbar": true,
                       "title" : "Deep lift shap",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"affine_size": 4}
                     },
                     { "method_name" : "lucent_render_vis",
                       "_comment": ["For lucent library methods, multi-label layers should be joined by '_' instad on '.' ",
                                      "Like to access CONV block inside Block1 mention, Block1_conv, also run it on cuda 0"],
                       "library" : "lucent",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "",
                       "device_id" : "cuda:0",
                       "_comment" : "This method doesn't work with patcher",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "_comment": "Keep the shape small, other wise requires lot of gpu",
                       "keywords": {"layer": "Conv3_conv:0","affine_size": 4, "shape": [64, 64, 64]}
                     },
                     { "method_name" : "captum_LayerGradientXActivation",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": false,
                       "title" : "Layer Gradient XActivation",
                       "device_id" : "cuda:6",
                       "_comment" : "Patcher won't work as the attribution output is of different size",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv1.conv[0]", "affine_size": 4}
                     },
                     { "method_name" : "captum_LayerDeepLift",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": false,
                       "title" : "Layer Deep Lift",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work as the attribution output is of different size",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv5.conv[0]","attribute_to_layer_input": true, "affine_size": 4}
                     },
                     { "method_name" : "captum_LayerGradCam",
                       "library" : "captum",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Layer Grad Cam",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer": "Conv1", "affine_size": 4}
                     },
                     { "method_name" : "torchray_Deconv",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Deconvnet",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work due to underline library implementation",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"affine_size": 4}
                     },
                     { "method_name" : "torchray_Gradcam",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Gradcam for Conv2",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work due to underline library implementation",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer" :  "Conv2.conv[0]", "affine_size": 4}
                     },
                     { "method_name" : "torchray_Gradient",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Torchray Gradient",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work due to underline library implementation",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"affine_size": 4}
                     },
                     { "method_name" : "torchray_Guidedbackprop",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "guided Back Propagation",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work due to underline library implementation",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"affine_size": 4}
                     },
                     { "method_name" : "torchray_Linearapprox",
                       "library" : "torchray",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": true,
                       "title" : "Linear Approx for Conv 2",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work due to underline library implementation",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer" :  "Conv2","affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_layer_activation_guided_backprop",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Layer Activation with Guided backpropagation",
                       "device_id" : "cuda:6",
                       "patch_required": true,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer" :  "Conv", "filter_pos" :  0, "firstLayer":"Conv1.conv[0]", "affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_layer_visualization",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Layer visualization (CNN Vis)",
                       "device_id" : "cuda:4",
                       "_comment": "Patcher won't work as the layer output is of different size",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer" :  "Conv5.conv[0]", "filter_pos" :  5, "affine_size": 4}
                     },
                     { "method_name" : "cnn_vis_DeepDream",
                       "library" : "CNN Visualization",
                       "inpt_transform_req" : false,
                       "visualize_method" : "",
                       "sign": "",
                       "show_colorbar": false,
                       "title" : "Deep Dream (CNN Vis)",
                       "device_id" : "cuda:6",
                       "_comment": "Patcher won't work as the layer output is of different size",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"layer" :  "Conv5.conv", "filter_pos" :  5, "init_color_low" :  180, "init_color_high" :  200, "shape":  [1,1,32, 128, 128], "affine_size": 4}
                     },
                     { "method_name" : "captum_ShapleyValueSampling",
                       "library" : "captum",
                       "_comment": "Not really for image data.Takes forever to run on image data",
                       "inpt_transform_req" : false,
                       "visualize_method" : "heat_map",
                       "sign": "all",
                       "show_colorbar": true,
                       "title" : "Shapley Value Sampling",
                       "device_id" : "cuda:0",
                       "patch_required": false,
                       "use": false,
                       "uncertainity_metrics": false,
                       "uncertainity_cascading": 0,
                       "keywords": {"n_samples" :  10}
                     }
                 ],
  "explain_methods" : [
                     { "method_name" : "lime_segmentation",
                       "library" : "lime",
                       "inpt_transform_req" : false,
                       "device_id" : "cuda:6",
                       "use": false,
                       "keywords": {"top_labels": 5, "num_samples":  5, "num_features" :  5, "depth":  32}
                     }

  ]
}